# 1. Обязательное условие

## Версия Python:

Из-за необходимости библиотеки **catboost** для работы проекта, нужен 64-bit python, желательно версии **3.11.x**

Скачать установочный файл нужной версии Python можно по этой [ссылке](https://www.python.org/downloads/windows/)


# 2. PostgreSQL

В данном проекте система управления реляционными базами данных PostgreSQL

## Требуется выполнить следующие шаги

1. Скачать  с [сайта](https://www.enterprisedb.com/downloads/postgres-postgresql-downloads) версию 15.5 PostgreSQL
2. Установить базу данных
3. Запустить
4. Вввести пароль при установке


 # 3. Создание **БД**

 В левом окне окне:
- **Servers** -> **PostgreSQL 15** -> **Databases**
- Правой кнопкой мыши по Databases-> **Create** -> **Database** -> Имя-любое 
- Нажать **Save**

# 4. Прописать имя и пароль от базы в **main.py**

 В class **WebAPP** в переменной **self.db_params** меняем:
 - значение **"web"** на название созданной БД в PostgreSQL.
 - значение **"123456"** на пароль при установке PostgreSQL.


# 5. Создание таблиц в БД:
## 5.1 Открываем терминал
## 5.2 Прописываем команду
Путь к папке bin может отличаться
```
cd C:\Program Files\PostgreSQL\15\bin
```
Далее выполняем команды:

**web** - название БД
```
.\psql -U postgres -d web
```
Заменить на путь к web.sql где у вас находится файл

```
\i C:\ITMO\ML-service\HW_4\web.sql
```

### Важно:
Если вывод в терминале:
```
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
```

**БД успешно создана**

# 6. Запуск проекта

## 6.1 Создание виртуального окружения:
Выполнить следующие команды:
 - Перейти в папку с файлами
 ```
python -m venv venv
```

Дождаться установки виртуального окружения и запустить ее 
```
.\venv\Scripts\Activate
```

Если не получается активировать окружение, то выполнить:
```
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
```

## 6.2. Установка библиотек

```
pip install -r requirements.txt
```

Дождаться установки всех библиотек

## 6.3. Запуск основного скрипта
```
python main.py
```

## После выполнения команд найти строчку:

Running on <u>http://127.0.0.1:5000</u> (Пример адреса)

Перейти в браузере по данному адресу.

# 7. Регистрация:

1. Нажать на **Register here**
2. Ввести данные:
    - **Username**: Свой логин
    - **Password**: Свой пароль
3. Нажать **Register**
4. Если аккаунт уже создан или надо отменить регистрацию, то нажать **Back to Login**.

# 8. Вход в систему:

Ввести данные при регистрации:
- **Username**: Свой логин
- **Password**: Свой пароль

На балансе пользователя появятся 100 кредитов (**Balance: 100 credits**)

# 9. Предсказание

## 9.1 В выподающем окне **Select Model** выбрать одну из трех моделей:
- **Logistic Regression** (5 credits)
- **Naive Bayes**         (10 credits)
- **CatBoost**            (15 credits)

Стоит обратить внимание что стоимость предсказания у каждой модели разная.

## 9.2 В поле **Product Description**(Описание продукта) написать запрос:
    
 - Пример запроса: *amd sempron 3850 1.3ghz 2mb 25w am1 radeon r3*
 - Нажать **Make Prediction**

# 10. Вывод результата

- В поле **Prediction** будет выведен результат предсказания модели


# 11. Сохранение истории

## Нажать на **Account Info**

Ниже в поле **Request History** сохраняется история запросов. 

### Шапка: 
 - Поле приветствия Welcome, **имя** ! 
 - **Delete account** - Удаление аккаунта
 - **Logout** - Разлогиниться
 - **Back** - Выйти в основное меню

 ### **User Information:** (Пример)
 - **Username:** Admin (Логин)
 - **UserID:** 1 (Номер ID аккаунта)
 - **Created** at 2024-01-24 14:52:58 (дата и время регистрации)
 - **Balance:** 90 (Updated at 2024-01-24 14:55:49) (актуальный баланс за вычетом кредитов использования данной модели)

 ### Change Password: (Смена пароля)
 - **Old Password**:          (набрать старый пароль)
 - **New Password**:          (набрать новый пароль)
 - **Confirm New Password**:  (повторить новый пароль)

 ### Prediction History: (История предсказаний)
 - **Time** (Дата и время предсказания модели)
 - **Description** (сам запрос)
 - **Model** (какая была использована)
 - **Prediction** (итог предсказания)

 ### Transaction History: (История транзакций)
 - **Time** (Дата и время списания кредитов)
 - **Transaction**: (Количество: списания/пополнения)
 - **Balance**: (Итоговый баланс)

# 7. Пополнение баланса

- В основнов меню в поле **Recharge Credits:** ввести необходимое количество кредитов для пополнения.
- Нажать **Recharge**
